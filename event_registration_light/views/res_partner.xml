<odoo>
	<data>

		<record id="event_registration_light.contact_search_inherit" model="ir.ui.view">
		    <field name="name">Contact</field>
		    <field name="model">res.partner</field>
		    <field name="inherit_id" ref="taz-common.contact_search"/>
		    <field name="arch" type="xml">
			<xpath expr="//field[@name='parent_industry_id']" position="after">
			    <field name="event_registration_ids" string="Inscriptions aux évènements" />
			</xpath>
		    </field>
		</record>


		<record id="event_registration_light.contact_form_inherit" model="ir.ui.view">
		    <field name="name">Contact</field>
		    <field name="model">res.partner</field>
		    <field name="inherit_id" ref="taz-common.contact_form"/>
		    <field name="arch" type="xml">
			<xpath expr="//page[@name='contact_channels']" position="after">
				<page string="Inscriptions aux évènements">
					<field name="event_registration_ids" readonly="1">
					   <tree string="Registration" sample="1" expand="1" default_order="create_date desc" class="o_event_registration_view_tree">
						<field name="active" invisible="1"/>
						<field name="email" optional="show"/>
						<field name="event_id" invisible="context.get('default_event_id')"/>
						<field name="state" decoration-info="state in ('draft', 'open')" decoration-success="state == 'done'" decoration-muted="state == 'cancel'" widget="badge"/>
						<field name="company_id" groups="base.group_multi_company" optional="hide"/>
						<field name="message_needaction" invisible="1"/>
						<button name="action_confirm" string="Confirm" type="object" icon="fa-check" attrs="{'invisible': ['|', ('active', '=', False), ('state', '!=', 'draft')]}"/>
						<button name="action_set_done" string="Mark as Attending" type="object" icon="fa-level-down" attrs="{'invisible': ['|', ('active', '=', False), ('state', '!=', 'open')]}"/>
						<button name="action_cancel" string="Cancel" type="object" class="o_btn_cancel_registration" icon="fa-times" attrs="{'invisible': ['|', ('active', '=', False), '&amp;', ('state', '!=', 'open'), ('state', '!=', 'draft')]}"/>
						<field name="activity_exception_decoration" widget="activity_exception"/>
					    </tree>
					</field>
				</page>
			</xpath>
		    </field>
		</record>

	</data>
</odoo>
