<odoo>
  <data>
	<record id="view_order_form_inherit" model="ir.ui.view">
            <field name="name">Sale order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
		   
		<field name="partner_id" position="before">
		    <field name="client_order_ref" position="move"/>
	    	</field>

		<field name="partner_shipping_id" position="attributes">
			<attribute name="invisible">True</attribute>
		</field>

		<field name="order_line" position="before">
			<group string="Lignes de commande de la part pilotÃ©e par Tasmane"/>
		</field>

		<xpath expr="//group[@name='note_group']" position="after">
			<group string="Bon de commande du client final">
				<group>
					<field name="other_company_amount" />
				</group>
				<group>
					<field name="final_customer_order_amount" />
				</group>
			</group>
		</xpath>

		<xpath expr="//notebook" position='inside'>
			<page string="Avances (sans facture)">
				<field name="advance_payment_ids" context="{'default_partner_id' : partner_id, 'default_advance_sale_order_id':active_id, 'default_ref' : 'Avance sans facture sur BC ' + (client_order_ref or '')}" />
			</page>
		</xpath>

		<xpath expr="//tree/field[@name='product_uom_qty']" position="before">
			<field name="direct_payment_purchase_order_line_id" optional="show" on_change="1"/>
			<field name="allowed_direct_payment_purchase_order_line_ids" invisible="1" on_change="1"/>
			<field name="untaxed_amount_to_invoice" optional="hide" on_change="1"/>
			<field name="previsional_invoice_date" optional="show" string="Date prev fact" on_change="1"/>
			<field name="invoice_lines" optional="hide"  on_change="1" widget="many2many_tags"/>

		</xpath>
		<field name="order_line" position="attributes">
                        <attribute name="context">{'default_analytic_distribution' : context.get('default_analytic_distribution')}</attribute>
                </field>

		<xpath expr="//field[@name='order_line']/tree" position="attributes">
			<attribute name="decoration-success">direct_payment_purchase_order_line_id != False</attribute>
		</xpath>

            </field>
        </record>



        <record id="view_order_tree_inherit" model="ir.ui.view">
            <field name="name">Sale order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_tree"/>
	    <field name="arch" type="xml">
		<field name="name" position="replace">
			<field name="client_order_ref"/>
		</field> 
            </field>
        </record>

        <record id="view_quotation_tree_with_onboarding_inherit" model="ir.ui.view">
            <field name="name">Sale order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>
	    <field name="arch" type="xml">
		<field name="name" position="replace">
			<field name="client_order_ref"/>
		</field> 
            </field>
        </record>


	<record id="view_order_line_tree_inherit" model="ir.ui.view">
            <field name="name">Sale order line</field>
            <field name="model">sale.order.line</field>
            <field name="inherit_id" ref="sale.view_order_line_tree"/>
	    <field name="arch" type="xml">
		<field name="order_id"  position="attributes">
			<attribute name="widget">many2one</attribute>
		</field>
		<field name="order_partner_id" position="after">
			<field name="order_partner_invoice_id"/>
		</field>
            </field>
        </record>

  </data>
</odoo>
