<odoo>
  <data>
    <record model="ir.ui.view" id="taz-common.business_action_tree">
      <field name="name">Actions commerciales</field>
      <field name="model">taz.business_action</field>
      <field name="arch" type="xml">
        <tree editable="top">
          <field name="parent_partner_industry_id" optional="hide"/>
      <field name="partner_id" attrs="{'required' : True}" context="{'tree_view_ref':'taz-common.contact_tree', 'form_view_ref':'taz-common.contact_form'}"/>
          <field name="state"/>
          <field name="user_id"/>
          <field name="date_deadline"/>
          <field name="name"/>
          <field name="note"/>
              <button icon="fa-eye" name="open_record" type="object" class="oe_highlight"/>
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="taz-common.business_action_form">
      <field name="name">Actions commerciales</field>
      <field name="model">taz.business_action</field>
      <field name="arch" type="xml">
        <form>
      <group>
              <field name="name"/>
          <field name="partner_id" attrs="{'required' : True}" context="{'tree_view_ref':'taz-common.contact_tree', 'form_view_ref':'taz-common.contact_form'}"/>
              <field name="state"/>
              <field name="user_id"/>
              <field name="date_deadline"/>
              <field name="note"/>
              <field name="parent_partner_industry_id"/>
          </group>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="view_mail_mass_mailing_search">
        <field name="name">taz.business_action.search</field>
        <field name="model">taz.business_action</field>
        <field name="arch" type="xml">
           <search string="Actions commerciales">
		   <!--
            <field name="name" string="Action" filter_domain="['|', ('name', 'ilike', self), ('subject', 'ilike', self)]"/>
		   -->
		<field name="parent_partner_industry_id" string="Business Domain"/>
            <field name="partner_id" string="Contact"/>
            <filter string="Mes actions commerciales" name="assigned_to_me"
                domain="[('user_id', '=', uid)]"
                help="Actions commerciales qui m'ont été assignées"/>
            <separator/>
            <filter name="filter_deadline_date" date="date_deadline"/>
            <separator/>
	    <!--
            <filter string="A/B Tests" name="filter_ab_test" domain="[('ab_testing_enabled', '=', True)]"/>
            <filter string="A/B Tests to review" name="filter_ab_test_to_review"
            domain="[('ab_testing_enabled', '=', True), ('ab_testing_winner_selection', '=', 'manual'), ('ab_testing_completed', '=', False)]"/>
            <separator/>
            <filter name="inactive" string="Archived" domain="[('active', '=', False)]"/>
            <group expand="0" string="Group By">
            <filter string="Status" name="group_state" context="{'group_by': 'state'}"/>
            <filter string="Sent By" name="sent_by" domain="[]" context="{'group_by': 'email_from'}"/>
            <separator/>
            <filter string="Sent Period" name="sent_date" domain="[]" context="{'group_by': 'sent_date'}"/>
            </group>
	    -->
        </search>
        </field>
    </record>

    <record id="taz-common.business_action_action" model="ir.actions.act_window">
        <field name="name">Activités commerciales</field>
        <field name="res_model">taz.business_action</field>
        <field name="view_mode">tree,form</field>
                <!--<field name="domain">[('res.model', '=', 'res.partner')]</field> -->
        <field name="context">{
                    'search_default_assigned_to_me': 1,
                    'default_user_id': uid,
            }</field>
    </record>
    <record id="taz-common.business_action_action_view_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="act_window_id" ref="taz-common.business_action_action"/>
    </record>
    <record id="taz-common.business_action_action_view_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="act_window_id" ref="taz-common.business_action_action"/>
    </record>

    <menuitem name="Actions commerciales" id="taz-common.business_action" parent="taz-common.commerce" action="taz-common.business_action_action"/>
     


  </data>
</odoo>
