<data>
    <record model="ir.ui.view" id="taz-common.contact_user_link_tree">
      <field name="name">Lien Contact Utilisateur</field>
      <field name="model">taz.contact_user_link</field>
      <field name="arch" type="xml">
          <tree editable="top" decoration-danger="is_late == True">
                  <field name="partner_id" optional="hide" options="{'no_quick_create':True}" attrs="{'required' : False}" context="{'tree_view_ref':'taz-common.contact_tree', 'form_view_ref':'taz-common.contact_form'}"/>
                  <field name="user_id" />
		  <field name="proximity_level" />
		  <field name="last_business_action_id" optional="hide" />
                  <field name="date_last_business_action" />
                  <field name="target_contact_frequency_id" options="{'no_quick_create':True}" />
		  <field name="is_late" optional="hide" />
		  <field name="next_meeting_before" optional="show" />
		  <field name="next_business_action_id" optional="show" />
		  <field name="comment" optional="show" />
		  <field name="communication_preference" optional="show" />
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="taz-common.contact_user_link_tree_intimity_plan">
      <field name="name">Lien Contact Utilisateur</field>
      <field name="model">taz.contact_user_link</field>
      <field name="arch" type="xml">
          <tree editable="top" decoration-danger="is_late == True">
                  <field name="partner_id" optional="hide" options="{'no_quick_create':True}" attrs="{'required' : False}" context="{'tree_view_ref':'taz-common.contact_tree', 'form_view_ref':'taz-common.contact_form'}"/>
                  <field name="user_id" optional="hide" />
		  <field name="proximity_level" />
		  <field name="last_business_action_id" optional="hide" />
                  <field name="date_last_business_action" />
                  <field name="target_contact_frequency_id" options="{'no_quick_create':True}" />
		  <field name="is_late" optional="hide" />
		  <field name="next_meeting_before" optional="show" />
		  <field name="next_business_action_id" optional="show" />
		  <field name="comment" optional="show" />
		  <field name="communication_preference" optional="show" />
        </tree>
      </field>
    </record>
<!--
    <record id="action_server_list_my_partner_intimity" model="ir.actions.server">
          <field name="name">Contacts de mon plan d'intimité</field>
          <field name="model_id" ref="model_res_partner"/>
          <field name="binding_model_id" eval="False"/>
          <field name="state">code</field>
          <field name="code">action =  env.get('res.partner').open_my_partner_intimity()</field>
     </record>
-->
    <record model="ir.actions.act_window" id="taz-common.action_intimity_plan">
      <field name="name">Mon plan d'intimité client</field>
      <field name="res_model">taz.contact_user_link</field>
      <field name="view_mode">tree</field>
      <field name="view_ids" eval="
	    [
	    (5, 0, 0),
	    (0, 0, {'view_mode': 'tree', 'view_id': ref('taz-common.contact_user_link_tree_intimity_plan')}),
	      ]" />
      <field name="domain">[('user_id', '=', uid)]</field>
    </record>

    <menuitem name="Contacts de mon plan d'intimité" id="taz-common.my_partner_intimity" sequence="20" parent="taz-common.commerce" action="taz-common.action_intimity_plan"/>


</data>
