<odoo>                      
  <data>
        <record id="timesheet_view_tree_inherit" model="ir.ui.view">
            <field name="name">Timesheet</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree"/>
	    <field name="priority">5</field>
            <field name="arch" type="xml">
		<field name="date" position="after">
			<field name="date_end"/>
			<field name="employee_id"/>
			<field name="category"/>
			<field name="amount"/>
		</field>
                <field name="unit_amount" position="replace">
			<!-- suppression du widget timesheet_uom qui empÃªche de saisir tous les montants-->
			<field name="unit_amount" optional="show" sum="Total" decoration-danger="unit_amount &gt; 1 or unit_amount &lt; 0"/>
                </field>
            </field>
        </record>

    <record id="action_recompute_timesheet_amount" model="ir.actions.server">
          <field name="name">recompute_timesheet_amount</field>
          <field name="model_id" ref="model_account_analytic_line"/>
          <field name="binding_model_id" ref="model_account_analytic_line"/>
          <field name="state">code</field>
	  <field name="code">for rec in records:
		  rec.refresh_amount()</field>
          <field name="groups_id" eval="[(4, ref('base.group_system'))]" />
   </record>
  </data>
</odoo>
